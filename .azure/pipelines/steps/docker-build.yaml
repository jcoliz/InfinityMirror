#
# Build docker container
#

parameters:
- name: project
  type: string 
  default: $(Solution.MainProject)

variables:
  Project.ContainerName: '$(userName)/$(System.TeamProject)-${{ parameters.project }}'
  Project.Dockerfile: '$(Solution.MainDirectory)/docker/${{ parameters.project }}.dockerfile'

steps:
- task: Docker@2
  displayName: Build docker container
  inputs:
    command: build
    dockerfile: $(Project.Dockerfile)
    buildContext: '$(Solution.DockerContextDirectory)'
    arguments: '--build-arg SOLUTION_VERSION=$(Solution.Version)'
    tags: $(Container.Tags)
    repository: $(Project.ContainerName)